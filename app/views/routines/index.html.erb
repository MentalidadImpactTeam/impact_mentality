<div class="subbanners_sistema_menu">
    <div style="background-color:#202020;" class="sistema_banner d-flex flex-row align-items-center">
        <div class="sistema_icono"></div>
        <h2>RUTINA</h2>
    </div>
</div>
<% if @restday %>
<div style="background-color: #191a1a;" class="container-fluid">
        <div class="row">
            <div class="bounceIn col-12">
                <center>
                    <img src="img/pillow.png" alt="">
                </center>
                <center>
                    <p class="pillow_txt bounceIn">Hoy es día de descanso</p>
                </center>
            </div>
        </div>
    </div>
<% else %>
<!-- TABLA DE CAMBIOS -->
<div id="sistema_rutina_cambio_table" class="animated flex-column justify-content-center align-items-center" style="display: none;">
    <div id="tabla_container">
        <table class="tabla_ejercicios table-striped table-hover" data-category="0">
            <thead>
                <tr id="tabla_titulos">
                    <th>EJERCICIO</th>
                    <th>SETS</th>
                    <th>DESCRIPCIÓN</th>
                    <th class="d-flex flex-row justify-content-end"> <div class="sistema_cancel_tabla_ejercicios"></div> </th>
                </tr>
            </thead>
            <tr id="tr_hover">
                <td > Lagartijas </td>
                <td> 3 sets de 15 repeticiones </td>
                <td colspan="2">Lorem itsum rem its ate m arem itsum rem its atesom arem itsum rem its atesom arem itsum rem its atesom arem itsum rem its atesom arem itsum rem its atesom ausom au</td>
            </tr>
        </table>
    </div>
</div>
<div class="sistema_contenido d-flex flex-column">
    <input type="hidden" class="hidden_modal" value="<%= @mostrar_modal %>">
    <!-- INFORMACION DE EJERCICIO -->
    <div id="sistema_r_contenedorinfo" class="flex-column justify-content-center align-items-center">
        <div class="sistema_r_infoejercicio d-flex flex-column align-items-center">
            <div class="sistema_r_infoejercicio_nombre"> NOMBRE DE EJERCICIO </div>
            <div class="sistema_r_infoejercicio_texto"> Lorem itsum rem its ate m arem itsum rem its atesom arem itsum rem its atesom arem itsum rem its atesom arem itsum rem its atesom arem itsum rem its atesom ausom au Lorem itsum rem its ate m arem itsum rem its atesom arem itsum rem its atesom arem itsum rem its atesom arem itsum rem its atesom arem itsum rem its atesom ausom au </div>
            <div class="sistema_r_infoejercicio_boton"> ENTENDIDO </div>
        </div>
    </div>
    <!-- ARRIBA -->
    <div class="d-flex flex-row justify-content-center align-items-center">
        <% @week_hash.each do |date| %>
            <% if date['day'] == 'LUNES' %>
            <div id="sistema_r_primerdia" class="sistema_r_dia flex-column justify-content-center <%= if date['active'] == 1 then "sistema_r_dia_activo" end %>">
                <div  class="sistema_r_dia_nombre"> <%= date['day'] %> </div>
                <div> <%= date['description'] %> </div>
            </div>
            <% elsif date['day'] == 'VIERNES' %>
            <div id="sistema_r_ultimodia" class="sistema_r_dia flex-column justify-content-center <%= if date['active'] == 1 then "sistema_r_dia_activo" end %>">
                <div  class="sistema_r_dia_nombre"> <%= date['day'] %> </div>
                <div> <%= date['description'] %> </div>
            </div>
            <% else %>
            <div class="sistema_r_dia flex-column justify-content-center <%= if date['active'] == 1 then "sistema_r_dia_activo" end %>">
                <div class="sistema_r_dia_nombre"> <%= date['day'] %> </div>
                <div> <%= date['description'] %> </div>
            </div>
            <% end %>
        <% end %>    
    </div>
    <% if !@mostrar_modal %>
    <!-- CENTRO -->
    <div class="sistema_r_contenedorejercicios d-flex">
        <!-- ANTERIOR -->
        <div id="flecha_anterior" class="sistema_r_centro_der d-flex flex-column justify-content-center" style="display:none !important;">
            <div id="sistema_r_siguiente"> ANTERIOR: </div>
            <div id="sistema_r_anteriorfase"> TRICERIE #1 </div>
            <div id="sistema_r_anteriorarrow" class="d-flex flex-column justify-content-center align-items-center">
                <div class="sistema_r_anteriormovil">ANTERIOR:</div>
                <div class="sistema_r_anteriormovil">PREHABS</div>
            </div>
        </div>

        <!-- EJERCICIOS -->
        <% @hash.keys.each do |group| %>
            <div class="sistema_r_centro_iz d-flex <%= if @hash[group]["show"] == 1 then "active" end %>" style="<%= if @hash[group]["show"] == 0 then "display: none !important" else "" end %>">
            <input type="hidden" class="hidden_group" value="<%= group %>">
            <% @hash[group]["exercises"].each do |exercise| %>
                <!-- EJERCICIO -->
                <div class="sistema_r_ejercicio d-flex">
                    <input type="hidden" class="hidden_exercise" value="<%= exercise['id'] %>" data-routine="<%= exercise['routine_exercise_id']%>">
                    <div class="sistema_r_ejercicio_arriba d-flex align-items-center flex-row justify-content-between">
                        <div class="sistema_r_tipoejercicio d-flex flex-column"> 
                            <div> <%= exercise['name'] %>  </div>
                            <div class="sistema_r_repeticionesmovil"> <%= exercise["set"] %> set de <%= exercise["rep"] %> repeticiones. </div>
                        </div>
                        <div class="sistema_r_cambiaricono"> </div>
                    </div>
                    <div class="sistema_r_ejercicio_centro"></div>
                    <div class="sistema_r_ejercicio_abajo align-items-center flex-row justify-content-between">
                        <div class="sistema_r_nombreejercicio"> <%= exercise["sets"] %> set de <%= exercise["reps"] %> repeticiones. </div>
                        <div class="sistema_r_infoicono"> </div>
                    </div>
                </div>
            <% end %>
            </div>
        <% end %>

        <!-- SIG -->
        <div class="sistema_r_centro_der d-flex flex-column justify-content-center">
            <div id="sistema_r_siguiente"> SIGUIENTE: </div>
            <div id="sistema_r_siguientefase"> TRICERIE #1 </div>
            <div id="sistema_r_siguientearrow" class="d-flex flex-column justify-content-center align-items-center">
                <div class="sistema_r_siguientemovil">SIGUIENTE:</div>
                <div class="sistema_r_siguientemovil">PREHABS</div>
            </div>
        </div>
        <div style="background-color: #191a1a; display: none;" class="container-fluid" id="rutina_finalizada">
            <div class="row">
                <div class="bounceIn col-12">
                    <center>
                        <img src="img/gym.png" alt="" id="img_rutina_finalizada" style="width: 350px; display: none;">
                    </center>
                    <center>
                        <p class="terminado_txt bounceIn" style="display: none;">Haz terminado tu rutina</p>
                    </center>
                </div>
            </div>
        </div>
    </div>
    <!-- ABAJO -->
    <div class="sistema_r_abajo d-flex flex-column">
        <div id="sistema_r_abajo_arriba" class="d-flex flex-column">
            <div id="sistema_r_progreso"> PROGRESO: </div>
            <div id="sistema_r_progresonombre"> WARM UP/PREHABS </div>
        </div>
        <div id="sistema_r_abajo_abajo" class="d-flex flex-row">
            <div id="sistema_r_warmup" class="d-flex flex-column">
                <div class="progress">
                    <div class="progress-bar" id="barra_warmup" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="sistema_r_textobarra">WARM UP / PREHABS</div>
            </div>
            <div id="sistema_r_tricerie"  class="d-flex flex-column">
                <div class="progress barra_activa">
                    <div class="progress-bar" id="barra_tricerie" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="sistema_r_textobarra"> TRICERIES </div>
            </div>
            <div id="sistema_r_finishers" class="d-flex flex-column">
                <div class="progress">
                    <div class="progress-bar" id="barra_finishers" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="sistema_r_textobarra"> FINISHERS </div>
            </div>
        </div>
    </div>
    <% end %>
</div>
<% end %>


<script>
        var tabla = $("#sistema_rutina_cambio_table");
        var info = $("#sistema_r_contenedorinfo");

        $('body').keydown(function(event) {
            if (event.which == 27) {
                tabla.css("display","none");
            };
        });

        $(".sistema_cancel_tabla_ejercicios").on("click", function(event){
            tabla.css("display","none");
            $(this).closest(".sistema_r_ejercicio").removeClass("change")
        });
        $(".sistema_r_infoicono").on("click", function(event){
            $(".sistema_r_infoejercicio_nombre").text($(this).closest(".sistema_r_ejercicio").find(".sistema_r_tipoejercicio").find("div:first").text())
            info.css("display", "flex");
        });
        $(".sistema_r_infoejercicio_boton").on("click", function(event){
            $(this).parent().parent().css("display","none");
        });
</script>

<style>
    .pillow_txt {
        font-size: 4vw;
        color: white;
        font-family: lato;
        text-align: center;
        font-weight: bold;
    }

    .terminado_txt {
        font-size: 4vw;
        color: white;
        font-family: lato;
        text-align: center;
        font-weight: bold;
    }
    
    .sistema_banner h2 {
        font-family: lato;
        font-weight: bold;
        color: white;
        text-shadow: 0 0 10px white;
        display: inline-block;
        margin-bottom: 0;
        padding-bottom: 8px;
        margin-left: .5vw;
    }
    
    .sistema_banner {
        display: block;
        width: 100%;
        height: 3.8vw;
        position: relative;
    }
    
    .sistema_container {
        display: inline-block;
        position: relative;
        float: right;
        height: 100vh;
        width: 95%;
        background-color: #191a1a;
        transition: all .5s;
    }

    .sistema_container_reduce {
        width: 80% !important;
    }

    @media (max-width: 1090px) { 
        .sistema_container {
        height: auto;
        }
    }
    

</style>